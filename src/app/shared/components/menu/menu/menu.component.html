<!-- PROMO TICKER (Env√≠o Gratis) -->
<div class="w-full bg-black text-white text-[11px] sm:text-xs font-medium tracking-wide relative overflow-hidden group cursor-default z-[60]">
  
  <!-- Fondo decorativo sutil (opcional, da textura) -->
  <div class="absolute top-0 left-0 w-full h-full bg-[linear-gradient(45deg,transparent_25%,rgba(255,255,255,0.1)_50%,transparent_75%)] bg-[length:250%_250%,100%_100%] bg-[position:-100%_0] group-hover:bg-[position:200%_0] transition-all duration-[1500ms] ease-in-out opacity-0 group-hover:opacity-100"></div>

  <div class="max-w-7xl mx-auto px-4 py-2.5 flex items-center justify-center gap-2 sm:gap-3">
    <!-- Bandera de Per√∫ (civil) - ratio 3:2 -->
    <svg
      class="w-25 h-3.5 md:w-25 md:h-3.5 shadow roun  ded-sm"
      viewBox="0 0 3 2"
      role="img"
      aria-label="Bandera de Per√∫"
      xmlns="http://www.w3.org/2000/svg"
    >
      <!-- franjas: cada franja es 1 unidad de ancho -->
      <rect x="0"   y="0" width="1" height="2" fill="#D91023" /> <!-- rojo izquierdo -->
      <rect x="1"   y="0" width="1" height="2" fill="#FFFFFF" /> <!-- blanco -->
      <rect x="2"   y="0" width="1" height="2" fill="#D91023" /> <!-- rojo derecho -->
    </svg>
    
    <p class="truncate">
      <span class="mr-1">üáµüá™</span> 
      <span class="opacity-90">ENV√çO </span>
      <span class="font-bold text-emerald-400">GRATIS A TODO EL PER√ö</span>
      <span class="opacity-90 mx-1">|</span>
      <span class="opacity-90">En compras mayores a </span>
      <span class="font-bold text-white border-b border-white/30 pb-0.5">S/ 50</span>
    </p>

  </div>
</div>

<!-- HEADER PRINCIPAL -->
<header class="w-full bg-white border-b shadow-sm sticky top-0 z-50 font-sans" role="banner">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex items-center justify-between h-16">

      <!-- IZQUIERDA: Logo + Nav Principal -->
      <div class="flex items-center gap-8">
        
        <!-- Logo -->
        <button (click)="goToHome()" class="flex items-center gap-3 focus:outline-none hover:opacity-80 transition-opacity" aria-label="Ir al inicio">
          <img src="assets/images/pelota.jpg" alt="Logo Qu√© Patas" class="h-10 w-auto object-contain" />
        </button>
        
        <!-- NAV DESKTOP (Men√∫ Principal) -->
        <nav class="hidden lg:flex items-center gap-6" aria-label="Categor√≠as principales">
          
          <!-- DROPDOWN: Cuidado del Cabello (HOVER + CLICK OUTSIDE) -->
          <div class="relative h-full flex items-center" 
            (clickOutside)="closeDropdown()" 
            (mouseenter)="catalogDropdownOpen.set(true)"
            (mouseleave)="catalogDropdownOpen.set(false)"
            (keydown.enter)="$event.stopPropagation()">
          
            <button
              (click)="toggleCatalogDropdown()"
              class="text-sm font-medium text-gray-700 hover:text-orange-500 focus:outline-none flex items-center gap-1 transition-colors h-full"
              aria-haspopup="true"
              [attr.aria-expanded]="catalogDropdownOpen()"
              aria-controls="catalog-dropdown"
            >
              Cuidado del Cabello 
              <!-- Icono rotativo -->
              <svg class="w-4 h-4 transition-transform duration-200 text-gray-400" [class.rotate-180]="catalogDropdownOpen()" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>

            <!-- Dropdown Panel -->
            @if (catalogDropdownOpen()) {
              <div
                id="catalog-dropdown"
                class="absolute top-full left-0 mt-[-10px] pt-4 bg-transparent w-64 z-50 animate-in fade-in slide-in-from-top-2 duration-200"
                role="menu"
                aria-label="Cuidado del Cabello"
              >
                 <!-- Contenedor Blanco interno (Para manejar el gap del hover sin que se cierre) -->
                 <div class="bg-white border border-gray-100 rounded-xl shadow-xl overflow-hidden">
                    <ul class="py-1 text-gray-700">
                      <li role="none">
                        <a role="menuitem"
                          routerLink="/catalogo-comun"
                          [queryParams]="{ id: 103 }"
                          (click)="closeDropdown()" 
                          class="flex items-center gap-3 px-4 py-3 text-sm hover:bg-orange-50 hover:text-orange-600 transition-colors cursor-pointer border-b border-gray-50">
                          <span class="w-1 h-1 bg-gray-300 rounded-full"></span> Tratamientos
                        </a>
                      </li>
                      <li role="none">
                        <a role="menuitem"
                          routerLink="/catalogo-comun"
                          [queryParams]="{ id: 101 }"
                          (click)="closeDropdown()"
                          class="flex items-center gap-3 px-4 py-3 text-sm hover:bg-orange-50 hover:text-orange-600 transition-colors cursor-pointer border-b border-gray-50">
                          <span class="w-1 h-1 bg-gray-300 rounded-full"></span> Champ√∫ profesional
                        </a>
                      </li>
                      <li role="none">
                        <a role="menuitem"
                          routerLink="/catalogo-comun"
                          [queryParams]="{ id: 102 }"
                          (click)="closeDropdown()"
                          class="flex items-center gap-3 px-4 py-3 text-sm hover:bg-orange-50 hover:text-orange-600 transition-colors cursor-pointer">
                          <span class="w-1 h-1 bg-gray-300 rounded-full"></span> Planchas
                        </a>
                      </li>
                    </ul>
                 </div>
              </div>
            }
          </div>

          <!-- Opciones Adicionales (Restauradas) -->
          <a routerLink="/catalogo-comun" 
             [queryParams]="{ id: 201}"
             class="text-sm font-medium text-gray-700 hover:text-orange-500 transition-colors cursor-pointer">
             Cuidado de la Piel
          </a>
          
          <a routerLink="/catalogo-comun" 
             [queryParams]="{ id: 401}"
             class="text-sm font-medium text-gray-700 hover:text-orange-500 transition-colors cursor-pointer">
             Maquillaje
          </a>

          <a routerLink="/catalogo-comun" 
             [queryParams]="{ id: 301}"
             class="text-sm font-medium text-gray-700 hover:text-orange-500 transition-colors cursor-pointer">
             Equipos Profesionales
          </a>

        </nav>
      </div>

     <!-- CENTRO: Value Props (Reemplazo del Buscador) -->
<div class="hidden xl:flex flex-1 px-4 justify-center">
  <div class="flex items-center gap-6 text-gray-500 bg-gray-50 px-6 py-2.5 rounded-full border border-gray-100">
    
    <!-- Propuesta 1: Pago Seguro -->
    <div class="flex items-center gap-2 group cursor-default">
      <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-sm text-emerald-600 group-hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
      </div>
      <span class="text-xs font-bold text-gray-600 group-hover:text-black transition-colors">Pago al Recibir</span>
    </div>

    <!-- Separador -->
    <div class="w-px h-4 bg-gray-200"></div>

    <!-- Propuesta 2: Env√≠os -->
    <div class="flex items-center gap-2 group cursor-default">
      <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-sm text-orange-500 group-hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" /><path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z" /></svg>
      </div>
      <span class="text-xs font-bold text-gray-600 group-hover:text-black transition-colors">Env√≠os a todo el Per√∫</span>
    </div>

    <!-- Separador -->
    <div class="w-px h-4 bg-gray-200"></div>

    <!-- Propuesta 3: Garant√≠a -->
    <div class="flex items-center gap-2 group cursor-default">
      <div class="w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-sm text-blue-500 group-hover:scale-110 transition-transform">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-3.5 h-3.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>
      </div>
      <span class="text-xs font-bold text-gray-600 group-hover:text-black transition-colors">Garant√≠a Total</span>
    </div>

  </div>
</div>

      <!-- DERECHA: Iconos / Mobile Toggle -->
      <div class="flex items-center gap-2 sm:gap-4">
        
        <!-- Search Icon (Mobile/Tablet Only) -->
        <button class="xl:hidden p-2 text-gray-600" (click)="toggleMobile()">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </button>

        <!-- User Icon -->
        <!-- <a routerLink="/account" class="p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all hidden sm:block" aria-label="Mi cuenta">
           <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
        </a> -->
        
        <!-- Cart Icon -->
        <!-- Cart Icon Button -->
        <a (click)="carrito.toggleCart()" 
          class="relative group p-2 .5 text-gray-600 hover:bg-gray-100 rounded-full transition-all cursor-pointer" 
          aria-label="Abrir Carrito"
          role="button"> 
          
          <!-- √çcono de Carrito (Shopping Cart) -->
          <svg class="w-6 h-6 group-hover:text-black transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>
          </svg>

          <!-- Badge Carrito (Contador) -->
          @if (carrito.count() > 0) {
            <span class="absolute top-0.5 right-0.5 flex h-5 w-5 items-center justify-center rounded-full border-2 border-white bg-orange-600 text-[10px] font-bold text-white shadow-sm group-hover:scale-110 transition-transform animate-in zoom-in duration-200">
              {{ carrito.count() }}
            </span>
          }
        </a>

        <!-- Mobile Hamburger -->
        <button class="lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors ml-1" (click)="toggleMobile()" aria-label="Abrir men√∫" [attr.aria-expanded]="mobileOpen()">
          @if (!mobileOpen()) {
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
          } @else {
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          }
        </button>
      </div>

    </div>
  </div>

  <!-- MOBILE MENU (Expandible) -->
  @if (mobileOpen()) {
    <div class="lg:hidden border-t border-gray-100 bg-white absolute w-full z-40 shadow-xl animate-slide-in-top max-h-[calc(100vh-64px)] overflow-y-auto">
      
      <!-- Mobile Search -->
      <div class="p-4 pb-2">
        <div class="relative">
           <input type="search" class="w-full bg-gray-50 border border-gray-200 rounded-lg py-2 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500/20" placeholder="Buscar productos...">
        </div>
      </div>

      <nav class="px-4 pb-6 pt-2 space-y-1" role="navigation">
        <a routerLink="/catalogo" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Todos los productos</a>
        
        <!-- Categor√≠as Principales -->
        <a routerLink="/catalogo" [queryParams]="{type: 'perros'}" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Perros</a>
        <a routerLink="/catalogo" [queryParams]="{type: 'gatos'}" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Gatos</a>
        
        <!-- Submen√∫ Mobile: Cuidado del Cabello -->
        <div class="py-2 border-t border-b border-gray-50 my-2">
           <p class="px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-wider">Cuidado del Cabello</p>
           <a routerLink="/catalogo-comun" [queryParams]="{id: 103}" (click)="toggleMobile()" class="block px-4 py-2 text-sm text-gray-600 hover:text-orange-600 pl-8">Tratamientos</a>
           <a routerLink="/catalogo-comun" [queryParams]="{id: 101}" (click)="toggleMobile()" class="block px-4 py-2 text-sm text-gray-600 hover:text-orange-600 pl-8">Champ√∫</a>
           <a routerLink="/catalogo-comun" [queryParams]="{id: 102}" (click)="toggleMobile()" class="block px-4 py-2 text-sm text-gray-600 hover:text-orange-600 pl-8">Planchas</a>
        </div>
        
        <!-- Otras Categor√≠as -->
        <a routerLink="/catalogo-comun" [queryParams]="{id: 201}" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Cuidado de la Piel</a>
        <a routerLink="/catalogo-comun" [queryParams]="{id: 401}" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Maquillaje</a>
        <a routerLink="/catalogo-comun" [queryParams]="{id: 301}" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-medium text-gray-700 hover:bg-gray-50 hover:text-orange-600 transition-colors">Equipos Profesionales</a>

        <a routerLink="/ofertas" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl font-bold text-red-500 hover:bg-red-50 transition-colors mt-2">üî• Ofertas</a>
        
        <div class="border-t border-gray-100 my-2 pt-2">
           <a routerLink="/account" (click)="toggleMobile()" class="block px-4 py-3 rounded-xl text-gray-600 hover:bg-gray-50 transition-colors flex items-center gap-3">
              <div class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center">
                 <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
              </div>
              Mi cuenta
           </a>
        </div>
      </nav>
    </div>
  }
</header>